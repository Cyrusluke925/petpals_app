{% extends 'petpals_app/base.html' %}

{% block content %}



<div>
    {% for post in posts %}
    <hr>
    <ul class='singlePost'>
        <article class='post'>
            <li class="singlePost">
                <section class='userInformation'>
                <img class="user_profile_image" src="{{post.user.profile.profile_picture.url }}" width=30px>
                <h4>{{post.user.username}}</h4>
                </section>
                <img src="{{post.image.url}}" width="598px">
                <article class = 'captionAndLike'>
                   
                    <form class="likeform" method="POST" enctype="multipart/form-data" novalidate>
                    {% csrf_token %}
                    <input type='hidden' class='new_post' name="post" value={{post.id}}>
                    <input class='user' type='hidden' name='user' value={{request.user.id}}>
                    <button class='postLike' value={{post.id}} type='submit' style='border: none'><i class="far fa-heart"></i></button>
                    </form>
                    {{post.caption}}

                    <article class="commentsAndLikes">
                        <form type='submit' id='commentForm' method='POST' enctype="multipart/form-data">
                            {% csrf_token %}
                            <input type='text' id="commentBox" name='content' placeholder="Add Comment">
                            <input type='hidden' name='post_id' required id='id_post_id' value={{post.id}} />
                            </form>
                            <div class="commentsContainer">
                            {% for comment in post.comments.all %}
                           
                                <ul class='commentList'>
                                    <li class='comment'>
                                        <article class='theComment'>
                                            <p class='commentUser' data-id='{{comment.user}}'>{{ comment.user }}</p><p class='commentContent' data-id='{{comment.post.id}}''> {{ comment.content }}</p>
                                        </article>
                                    </li>
                                </ul>
                                {% endfor %}
                            </div>
                    </article>

                </article>
            </li>
        </article>
        
        
    </ul>
    {% endfor %}
</div>

{% endblock %}