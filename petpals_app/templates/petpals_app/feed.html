

{% extends "petpals_app/base.html" %}

{% block content %}
  <ul>
      {% for post in posts %}
        <hr>
        <li>
           <img src="{{post.image.url}}" width="300px"><br>
            {{post.caption}}

            <form class="likeform" method='POST' enctype='multipart/form-data' novalidate>
              {% csrf_token %}
              <input type="hidden" class='new_post' name="post" value={{post.id}}>
              <input class='user' type='hidden' name='user' value={{request.user.id}}>
              <button class='postLike'' value={{post.id}} type='submit' style='border: none'><i class="far fa-heart"></i></button>
             </form>

            <form method="POST" enctype="multipart/form-data">
              {% csrf_token %}
              <input type="text" name="content" placeholder="Add Comment">
              <input type="hidden" name="post_id" required id="id_post_id" value={{post.id}} />
              <button type="submit">Post</button>
          </form>
          {% for comment in post.comments.all %}
          <ul>
            <li>
              {{ comment.content }} -{{ comment.user }} 
            </li>
          </ul>
          {% endfor %}
        </li>
      {% endfor %}
  </ul>
{% endblock %}